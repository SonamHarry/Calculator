<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menubar</title>
  <style>
    /* menubar horizontal */
    .menubar ul {
      display: inline-flex;
      list-style: none;
      padding: 0;
      margin: 0;
    }

    /* space between menubar items */
    .menubar ul li {
      position: relative;
      margin-right: 20px;
    }

    .dropdown-icon {
      position: absolute;
      top: 20%;
      right: -1em;
    }

    /* submenu items hidden */
    .about-us,
    .contact {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background-color: #f1f1f1;
      padding: 10px;
      min-width: 120px;
    }

    /* space between submenu items */
    .about-us li,
    .contact li {
      padding: 5px 0;
    }

    /*submenu items Vertical */
    .about-us ul,
    .contact ul {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin: 0;
      padding: 0;
    }
    .about-us:hover,
    .contact:hover {
      display: block;
    }
  </style>
</head>



<body>
  <div class="menubar" id="menu">
    <ul role="menubar">
      <li role="none"><a href="#home" aria-label="Home" id="menu1" role="menuitem" onclick="tabClick(1)"
          tabindex="0">Home</a></li>
      <li role="none"><a href="#aboutus" aria-label="About us" id="menu2"  role="menuitem" aria-expanded="false"
          onclick="tabClick(2)" tabindex="-1">About us</a>
        <span class="dropdown-icon">&#9662;</span>
        <div class="about-us" id="content2" role="none">
          <ul role="menu">
            <li role="none"><a role="menuitem" id="Overview" href="#" tabindex="0">Overview</a></li>
            <li role="none"><a role="menuitem" href="#" tabindex="-1">Administration</a></li>
            <li role="none"><a role="menuitem" href="#" tabindex="-1">Facts</a></li>
          </ul>
        </div>
      </li>
      <li role="none"><a href="#Admissions" aria-label="Admissions" id="menu3"  role="menuitem" aria-expanded="false"
          onclick="tabClick(3)" tabindex="-1">Admissions</a>
        <span class="dropdown-icon">&#9662;</span>
        <div class="contact" id="content3" role="none">
          <ul role="menu">
            <li role="none"><a role="menuitem" id="Apply" href="#" tabindex="0">Apply</a></li>
            <li role="none"><a role="menuitem" id="Tuition" href="#" tabindex="-1">Tuition</a></li>
            <li role="none"><a role="menuitem" id="Signup" href="#" tabindex="-1">Sign up</a></li>
          </ul>
        </div>
      </li>
    </ul>
  </div>
  <div class="home" id="content1">
    <h1>This is my <a href="#Home">home</a> page</h1>
  </div>

  <script>
  function tabClick(menubar) {
  let menu1 = document.getElementById("menu1");
  let menu2 = document.getElementById("menu2");
  let menu3 = document.getElementById("menu3");
  let x = document.getElementById("content1");
  let y = document.getElementById("content2");
  let z = document.getElementById("content3");

  menu1.setAttribute("tabindex", "-1");
  menu2.setAttribute("tabindex", "-1");
  menu3.setAttribute("tabindex", "-1");
  // menu1.setAttribute("aria-expanded", "false");
  menu2.setAttribute("aria-expanded", "false");
  menu3.setAttribute("aria-expanded", "false");
  // x.style.display = "none";
  y.style.display = "none";
  z.style.display = "none";

  if (menubar === 1) {
    // x.style.display = "block";
    // menu1.setAttribute("aria-expanded", "true");
    menu1.setAttribute("tabindex", "0");
    menu1.focus();
  } else if (menubar === 2) {
    y.style.display = "block";
    menu2.setAttribute("aria-expanded", "true");
    menu2.setAttribute("tabindex", "0");
    menu2.focus();
  } else if (menubar === 3) {
    z.style.display = "block";
    menu3.setAttribute("aria-expanded", "true");
    menu3.setAttribute("tabindex", "0");
    menu3.focus();
  }
}
const menu = document.getElementById("menu");

menu.addEventListener("keydown", e => {
  if (e.key === "ArrowRight") {
    const nextMenuItem = e.target.parentElement.nextElementSibling;
    if (nextMenuItem) {
      const anchor = nextMenuItem.querySelector("a");
      if (anchor) {
        anchor.focus();
      }
    }
  } else if (e.key === "ArrowLeft") {
    const prevMenuItem = e.target.parentElement.previousElementSibling;
    if (prevMenuItem) {
      const anchor = prevMenuItem.querySelector("a");
      if (anchor) {
        anchor.focus();
      }
    }
  } else if (e.key === "Enter" ||  e.key === " ") {
    e.target.click();
    Overview.focus();
    Apply.focus();
}
else if (e.key === "ArrowDown") {
      const currentMenuItem = e.target.parentElement;
      const submenu = currentMenuItem.querySelector(".about-us") || currentMenuItem.querySelector(".contact");
      if (submenu) {
        submenu.style.display = "block";
        submenu.setAttribute("aria-expanded", "true");
        submenu.setAttribute("tabindex", "0");
        submenu.querySelector("a").focus();
      }}
 else if (e.key === "Escape") {
    // e.target.click();
    e.target.parentElement.parentElement.parentElement.previousElementSibling.previousElementSibling.focus();
    document.getElementById('content2').style.display = 'none';
    menu2.setAttribute('aria-expanded', 'false');
    document.getElementById('content3').style.display = 'none';
    menu3.setAttribute('aria-expanded', 'false');
    parentElement.querySelector('a').focus();

  }

});
const content2 = document.getElementById("content2");
const content3 = document.getElementById("content3");


content2.addEventListener("keydown", function (e) {
  const currentOption = e.target.parentElement;
  if (e.key === "ArrowUp") {
    const previousElement = currentOption.previousElementSibling;
    if (previousElement) {
      previousElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");
    } else {
      const lastElement = currentOption.parentElement.lastElementChild;
      lastElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");
    }
  } else if (e.key === "ArrowDown") {
    const nextElement = currentOption.nextElementSibling;
    if (nextElement) {
      nextElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");
    } else {
      const firstElement = currentOption.parentElement.firstElementChild;
      firstElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");
    }
  } else if (e.key === "ArrowRight") {
    content2.style.display = 'none';
    menu2.setAttribute('aria-expanded', 'false');
    menu3.focus();

  }

});

content3.addEventListener("keydown", function (e) {
  const currentOption = e.target.parentElement;
  if (e.key === "ArrowUp") {
    const previousElement = currentOption.previousElementSibling;
    if (previousElement) {
      previousElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");
    } else {
      const lastElement = currentOption.parentElement.lastElementChild;
      lastElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");

    }
  } else if (e.key === "ArrowDown") {
    const nextElement = currentOption.nextElementSibling;
    if (nextElement) {
      nextElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");
    } else {
      const firstElement = currentOption.parentElement.firstElementChild;
      firstElement.querySelector('a').focus();
      currentOption.setAttribute("aria-expanded", "true");
      currentOption.setAttribute("tabindex", "0");
      currentOption.setAttribute("aria-expanded", "false");
      currentOption.setAttribute("tabindex", "-1");
    }
  } else if (e.key === "ArrowLeft") {
    content3.style.display = 'none';
    menu3.setAttribute('aria-expanded', 'false');
    menu2.focus();
  }
});
  </script>
</body>

</html>